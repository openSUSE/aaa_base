.\"
.\" Copyright 2000-2002 Werner Fink, 2000-2002 SuSE GmbH Nuernberg, Germany.
.\"
.\" This program is free software; you can redistribute it and/or modify
.\" it under the terms of the GNU General Public License as published by
.\" the Free Software Foundation; either version 2 of the License, or
.\" (at your option) any later version.
.\"
.TH INSSERV 8 "May 27, 2002" "Version 0.99" "The SuSE boot concept"
.UC 8
.OS SuSE Linux
.SH NAME
Insserv \- Enable an installed system init script
.SH SYNOPSIS
.\"
.B insserv
.RB [ -d ]
.RB [ -f ]
.RI [[ / ] path/to/init.d/ ] script \ ...
.PP
.B insserv
.RI [[ / ] path/to/init.d/ ] script [ ,start=lvl1 [ ,lvl2 ]]\ ...
.PP
.B insserv
.B -r
.RB [ -d ]
.RB [ -f ]
.RI [[ / ] path/to/init.d/ ] script \ ...
.PP
.B insserv
.B -h
.PP
.RB /usr/lib/lsb/install_initd
.RI [[ / ] path/to/init.d/script ]
.PP
.RB /usr/lib/lsb/remove_initd
.RI [[ / ] path/to/init.d/script ]
.SH DESCRIPTION
.B insserv
enables an installed system init script (`boot script')
by reading the comment header of the script, e.g.:
.sp 1
.in +1l
.nf
 ### BEGIN INIT INFO
 # Provides:       boot_facility_1 [ boot_facility_2 ...]
 # Required-Start: boot_facility_1 [ boot_facility_2 ...]
 # Required-Stop:  boot_facility_1 [ boot_facility_2 ...]
 # X-SuSE-Should-Start: boot_facility_1 [ boot_facility_2 ...]
 # X-SuSE-Should-Stop:  boot_facility_1 [ boot_facility_2 ...]
 # Default-Start:  run_level_1 [ run_level_2 ...]
 # Default-Stop:   run_level_1 [ run_level_2 ...]
 # Description:    multiline_description
 ### END INIT INFO
.fi
.in -1l
.sp 1
and calculating the dependencies between all scripts.
Please note, that the
.BR Required-Stop,
.\" .BR Should-Stop ,
.BR X-SuSE-Should-Stop ,
and
.B Default-Stop
are ignored in SuSE Linux, because the SuSE boot script concept
uses a differential link scheme (see
.IR init.d (7)).
With known dependencies and runlevel(s)
.B insserv
sets and reorders the corresponding symbolic links
of the concerned runlevels directories (see
.IR init.d (7)).
Known runlevels are:
.sp 1
.in +1l
.nf
 \fB0\fR\   used for System halt
 \fB1\fR\   used for single user mode
 \fB2\fR\   used for local multiuser without remote network
 \fB3\fR\   used for full multiuser with network
 \fB4\fR\   reserved for local use
 \fB5\fR\   used for full multiuser with network and xdm
 \fB6\fR\   used for System reboot
 \fBS\fR\   used during boot into single user mode
 \fBB\fR\   used during boot before any other runlevel
.fi
.in -1l
.sp 1
.PP
.B insserv
scans for
.B System Facilities
in the configuration file
.IR /etc/insserv.conf .
Each line which begins with
.B $
and a following name defines a system facility
accordingly to the Linux Standard Base Specification (LSB),
All names followed by such a system facility
will declare the required dependencies of the facility.
Here is an example for
.IR /etc/insserv.conf :
.sp 1
.in +1l
.nf
 # All local filesystems are mounted
 # (done during boot phase)
 $local_fs       boot

 # Low level networking
 $network        network route

 # Named is operational
 $named          named

 # All remote filesystems are mounted
 # (in some cases /usr may be remote).
 $remote_fs      $local_fs nfs

 # System logger is operational
 $syslog         syslog

 # All network daemons are running
 $netdaemons     portmap inetd
.fi
.in -1l
.sp 1
.\"
.SH OPTIONS
Currently there is only two options for
.BR insserv .
.TP
.BR \-r ,\  \-\-remove
Remove the listed scripts from all runlevels.
.TP
.BR \-d ,\  \-\-default
Use default runlevels a defined in the scripts.
This may restore an edited runlevel link scheme.
.TP
.BR \-f ,\  \-\-force
Ignore if a required service is missed.
.TP
.BR \-h ,\  \-\-help
Print out short usage message.
.PP
But you may use the argument syntax described in the
following section.
.SH ARGUMENTS
.TP
.RI [[ / ] path/to/init.d/ ]
Relative or absolute path to the init scripts base directory.
For the SuSE Linux boot concept, this defaults to
.I /etc/init.d/
in compliance with the LSB specification.
In this case
.B insserv
does not add or remove a script to the runlevels
declared in the script headers, but may re-order the
runlevels if the order of the currently enabled scripts
has changed (see option
.BR \-d ).
Note that if a relative path is used
.B insserv
has to be called from the root directory.
.TP
.RI [[ / ] path/to/init.d/ ] script\ ...
List of scripts which have to be added to
the runlevels. If a path is used it
should point to the absolute or relative
location of the boot scripts.
.B insserv
checks for the existence of these scripts.
For the runlevels the information found in
the script is used.
.TP
.RI [[ / ] path/to/init.d/ ] script [ ,start=lvl1 [ ,lvl2 ]]\ ...
List of scripts which have to be added to
the specified runlevels to be started with.
You may use this extension to overwrite the default values
for start and stop runlevels of the script.
The extension
.IR ,stop=lvl1 [ ,lvl2 ]]
is possible but ignored on SuSE Linux.
.TP
.RI \fB\-r\fR\ [[ / ] path/to/init.d/ ] script\ ...
List of scripts which should be removed from
the runlevels. If a path is used it
should point to the absolute or relative
location of the boot scripts.
.B insserv
checks for the existence of these scripts.
.\"
.SH BUGS
Boot script sometimes misses comments.
.SH FILES
.TP
.I /etc/insserv.conf
configuration file for
.B insserv
which defines the LSB System Facilities.
.TP
.I /etc/init.d/
path to the SuSE boot script base directory as
required by the Linux Standard Base Specification (LSB).
.\"
.SH SEE ALSO
.BR init.d (7),
.BR init (7),
.BR startproc (8),
.BR checkproc (8),
.BR killproc (8),
.SH COPYRIGHT
2000\-2002 Werner Fink,
2000\-2002 SuSE GmbH Nuernberg, Germany.
.SH AUTHOR
Werner Fink <feedback@suse.de>
